<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devesh Datwani Trends On The Map</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
</head>
<style>
    h4{
        color: gray;
        text-align: center;
    }
    .wrapper{
        font-family: 'Noto Sans HK', cursive;
        text-align: justify;
        margin-top: 0;
    }
    h2{
        font-family: 'Noto Sans HK', cursive;
    }
</style>
<body>
    <header>
        <div style="flex: 80%;">
        <h1 style="font-family: 'Noto Sans HK', cursive; margin-left: 2rem; font-size: 2rem; color: black;">Devesh Datwani</h1>
        </div>
        <div style="flex: 10%;">
            <h4><a href="index.html" style="color: sow;">Home</a>
        </div>
    </header>
    <h2 style="text-align: center; margin-top: 2rem;">Trends On The Map</h2>
        <br>
        <div class="wrapper">
            <h4 style="color: black; text-align: left;">The Webpage</h4>
            <p>https://www.trendsonthemap.com</p>
            <br>
            <h4 style="color: black; text-align: left;">Github</h4>
            <p>https://github.com/deveshdatwani/trendsonthemap</p>
            <br>
            <h3>Webpage Snippet</h3>
            <br>
            <div style="text-align: center;">
                <img src="images/trends.PNG" alt="" style="width: 100%; height: auto;">
            </div>
            <h3>Introduction</h3>
            <br>
            <p>Social media has seen exponential growth in the number of its users for about a decade now. More and more people turn to social media to voice their opnions or share parts of their life. Twitter has become a medium on which ideas, opinions and beliefs are shared.</p>
            <br>
            <p> In Twitter, a word, prhase or a hashtag mentioned by a large number of users in a short period of time is said to be "trending topic" or simply "trending" at that point of time. Twitter provides with a funtionality to retrieve the trending topics based on locations through its API.</p>
            <br>
            <p> Trendsonthemap aims to visualize trends on a map allowing users to catch up with world trends without hastles.
            <br>
            <div style="text-align: center;">
                <img src="images/twitter-trends.PNG" alt="" style="height: 20rem; width: auto;">
            </div>
            <p>A GET request made with authentic API secret key credentials returns JSON file which contains trending topics and in some cases the number of tweets. </p>
            <br>
            <h3>Technologies Used</h3>
            <br>
            <ul style="margin-left: 30px;">
                <li>Python</li>
                <li>HTML and CSS</li>
                <li>Folium</li>
                <li>Jinja2</li>
                <li>apschedular</li>
                <li>MYSQL</li>
            </ul>
            <br>
            <h3>Installation and Launch (Linux)</h3>
            <br>
            <p>From the Terminal, clone the github repository with the command 
                <br><span style="background-color: lightgray;">git clone https://github.com/deveshdatwani/trendsonthemap</span>
            </p>
            <br>
            <p>You will also need to set up a mysql server on your machine. Once that is done, import the trendsonthemap database into your msql-server. Do so by using the following command
                <span style="background-color: lightgray;">mysql -u username -p trendsonthemap < file.sql</span>
            </p>        
            <br>
            <p>Trendsonthemap uses data from this database to access trends. Trends are updated every 90 minutes (more or less).</p>
            <br>
            <p>Then move into the folder with the command 
                <span style="background-color: lightgray;">cd trendsonthemap</span></p>
            <br>
            <p>After you have installed all the dependencies, you can launch the flask app with the "flask" command. Before that you need to tell Flask where to look for the app. Do this through the export command 
                <span style="background-color: lightgray;">export FLASK_APP=app.py</span>
            </p>
            <br>
            <p>Then run flaskk app with the command 
                <span style="background-color: lightgray;">flask run / python3 -m flask run</span>
            </p>
            <br>
            <p>You will see an output similar to this:</p>
            <br>
            <p>You can then visit the page at http://127.0.0.1:5000 to check out your webapp.</p>
            <br>
            <h3>Project Walkthrough</h3>
            <br>
            <p>The two modules which run the webapp are app.py and find_trends.py. Whenever a call is made to '/' page of the server, the main_page function decorated by flask's app first connects to the database to fetch trends, latitude and longitude of every city. It then creates markers on the folium map.
            </p>
            <br>
            <p>Folium binds this into an html template which is then embedded in an iframe of another jinja template.
            </p>
            <br>
            <p>-- mysql-connector connecting to the database.</p>
            <br>
            <div style="text-align: center;">
                <img src="images/snippet1.PNG" alt="" style="width: 90%; height: auto;">
            </div>
            <br>
            <p>-- folium creating a map and marking cities from the latitude and longitude values fromt database as well as the trends.</p>
            <br>
            <div style="text-align: center;">
                <img src="images/snippet2.PNG" alt="" style="height: auto; width: 100%;">
            </div>
            <br>
            <p>find_trends.py fetches city based trends from Twitter through its API and stores it in the database. Since Twitter allows only 70 requests a minute. An iterator has been set up in the database to fetch city based trends in a batch of 20 every 5 minutes. The apschedular schedules function 'find_trends()' for this purpose.</p>
            <br>
        </div>
    <br><br><br>
</body>
<footer>

</footer>
</html>
